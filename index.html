<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday, My Love</title>
<style>
  :root{
    --accent:#ff77a9;
    --ribbon:#ff99c2;
    --box:#b30059;
    --bg:#020111;
    --text:#fff;
  }

  /* Basic & responsive layout */
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: "Segoe UI", system-ui, -apple-system, "Helvetica Neue", Arial;
    color:var(--text);
    background:var(--bg);
    min-height:100vh;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden;
  }

  /* subtle star grid */
  body::before{
    content:"";
    position:fixed; inset:0;
    background:
      radial-gradient(circle, rgba(255,255,255,0.16) 1px, transparent 1px) repeat;
    background-size:4px 4px;
    opacity:0.14;
    pointer-events:none;
  }

  /* sticky tabs */
  .tabs{
    display:flex;
    gap:12px;
    justify-content:center;
    padding:12px;
    position:sticky;
    top:0;
    z-index:50;
    backdrop-filter:blur(6px);
    background:linear-gradient(180deg, rgba(0,0,0,0.15), rgba(0,0,0,0.04));
  }
  .tab{
    padding:8px 18px;
    border-radius:999px;
    background:rgba(255,255,255,0.06);
    cursor:pointer;
    font-weight:600;
    transition:all .22s;
    user-select:none;
  }
  .tab:hover{ transform:scale(1.03) }
  .active-tab{ background:var(--accent); box-shadow:0 6px 20px rgba(255,119,169,0.12); }

  /* section container */
  .section{ display:none; padding:28px 18px 80px; text-align:center; min-height:60vh; }
  .section.active{ display:block; }

  /* headings */
  h1{ font-size:clamp(22px,5vw,44px); margin:18px 0; text-shadow:0 0 14px rgba(255,255,255,0.07) }
  .subtitle{ font-size:clamp(14px,2.6vw,18px); opacity:0.86; margin-top:-6px }

  /* shooting stars (fixed) */
  .shooting-star{ position:fixed; top:-20vh; width:2px; height:80px; background:linear-gradient(white,transparent); transform:rotate(45deg); opacity:0; animation:shoot 3s linear infinite; pointer-events:none; z-index:1 }
  @keyframes shoot{
    0%{ opacity:0; transform:translate(-200px,-200px) rotate(45deg) }
    10%{ opacity:1 }
    100%{ opacity:0; transform:translate(100vw,100vh) rotate(45deg) }
  }

  /* sparkles */
  .sparkle{ position:fixed; width:5px; height:5px; border-radius:50%; background:white; opacity:0.85; pointer-events:none; animation:sparkleAnim linear infinite; z-index:1 }
  @keyframes sparkleAnim{ from{ transform:translateY(0) scale(1); opacity:1 } to{ transform:translateY(220px) scale(.2); opacity:0 } }

  /* center content wrapper */
  .center{ max-width:980px; margin:0 auto; padding:0 12px; z-index:5; position:relative }

  /* Gift box area - responsive sizes */
  .gift-area{ margin:28px auto 8px; display:flex; justify-content:center; align-items:flex-start }
  .gift-box{
    --w:220px; /* base size */
    width:var(--w);
    height:180px;
    background:var(--box);
    border-radius:12px;
    position:relative;
    overflow:visible;
    transition:transform .6s ease, height .6s ease, opacity .6s ease;
    transform-origin:center top;
    box-shadow:0 12px 30px rgba(0,0,0,0.45), inset 0 -6px 12px rgba(0,0,0,0.12);
  }

  /* the centered lid (we'll rotate it open) */
  .lid{
    position:absolute;
    left:50%;
    transform:translateX(-50%);
    top:-40px;
    width:calc(var(--w) + 10px);
    height:42px;
    background:linear-gradient(180deg,#ff4d94,#ff7ab0);
    border-radius:10px 10px 6px 6px;
    box-shadow:0 6px 18px rgba(0,0,0,0.25);
    transform-origin:left center; /* rotate from left to look like opening */
    transition:transform .65s cubic-bezier(.2,.9,.2,1);
    z-index:8;
  }

  /* vertical ribbon on the box - hides when opened */
  .vertical-ribbon{
    position:absolute;
    left:calc(50% - 13px);
    top:0;
    width:26px;
    height:100%;
    background:var(--ribbon);
    border-radius:6px;
    z-index:6;
    transition:opacity .5s ease, transform .6s ease;
  }

  /* pull ribbon (what the user pulls) */
  .pull-ribbon{
    position:absolute;
    left:50%;
    top:-68px;
    transform:translateX(-50%);
    width:160px;
    height:38px;
    line-height:38px;
    border-radius:24px;
    background:var(--ribbon);
    color:#210023;
    font-weight:700;
    text-align:center;
    box-shadow:0 10px 26px rgba(255,153,194,0.12);
    z-index:12;
    touch-action:none; /* ensure pointer events for dragging */
    user-select:none;
    transition:transform .18s ease, opacity .25s;
    cursor:grab;
  }
  .pull-ribbon:active{ cursor:grabbing }

  /* revealed message */
  .gift-message{
    display:none;
    margin-top:18px;
    font-size:clamp(16px,3.2vw,22px);
    text-shadow:0 0 10px rgba(255,170,212,0.12);
    z-index:6;
  }

  /* when box is opened - hide box and ribbon, rotate lid */
  .gift-box.opened{ height:0; transform:scaleY(.2); opacity:0; pointer-events:none }
  .gift-box.opened ~ .gift-message{ display:block; animation:fadeIn .7s ease both }

  .lid.opened{ transform:rotate(-120deg) translateX(-12%); opacity:0.98 }
  .pull-ribbon.opened{ opacity:0; transform:translateY(-140px) rotate(-10deg); pointer-events:none }
  .vertical-ribbon.opened{ opacity:0; transform:scaleY(.2); pointer-events:none }

  @keyframes fadeIn{ from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)} }

  /* timeline styling */
  .timeline{
    width:90%;
    max-width:900px;
    margin:20px auto 80px;
    border-left:3px solid var(--accent);
    padding-left:28px;
    text-align:left;
  }
  .event{ margin:30px 0 }
  .event-title{ color:#ffb0d4; font-size:18px; font-weight:700 }
  .event-text{ opacity:0.9; font-size:15px; margin-top:6px }

  /* small screens adjustments */
  @media (max-width:520px){
    .pull-ribbon{ width:140px; top:-60px; height:36px; line-height:36px }
    .gift-box{ --w:170px; height:150px }
    .lid{ top:-36px; height:38px; width:calc(var(--w) + 8px) }
    .vertical-ribbon{ left:calc(50% - 11px); width:22px }
    .timeline{ padding-left:18px; border-left-width:2.5px }
    .tabs{ padding:10px; gap:8px }
  }
</style>
</head>
<body>

<!-- shooting stars -->
<div class="shooting-star" style="left:8%; animation-delay:0s"></div>
<div class="shooting-star" style="left:40%; animation-delay:1.1s"></div>
<div class="shooting-star" style="left:72%; animation-delay:0.5s"></div>

<!-- tabs -->
<div class="tabs" role="tablist" aria-label="Birthday tabs">
  <div class="tab active-tab" role="tab" tabindex="0" data-target="birthday" onclick="openTab(event)">Happy Birthday</div>
  <div class="tab" role="tab" tabindex="0" data-target="gift" onclick="openTab(event)">Gift Box</div>
  <div class="tab" role="tab" tabindex="0" data-target="timeline" onclick="openTab(event)">Timeline</div>
</div>

<!-- CONTENT SECTIONS -->
<div id="birthday" class="section active">
  <div class="center">
    <h1>‚ú® Happy Birthday, My Love ‚ú®</h1>
    <p class="subtitle">Tonight the stars shine only for you.</p>
  </div>
</div>

<div id="gift" class="section">
  <div class="center">
    <h1>Your Birthday Gift üéÅ</h1>
    <p class="subtitle">Pull the ribbon (drag upward) to reveal your surprise</p>

    <div class="gift-area" aria-hidden="false">
      <div class="gift-box" id="box">
        <div class="lid" id="lid" aria-hidden="true"></div>
        <div class="vertical-ribbon" id="verticalRibbon" aria-hidden="true"></div>

        <div class="pull-ribbon" id="pullRibbon" role="button" aria-label="Pull ribbon to open gift" tabindex="0">
          Pull Me üéÄ
        </div>
      </div>
    </div>

    <div class="gift-message" id="giftMsg" aria-live="polite">
      üéÅ You opened your birthday surprise!<br><br>
      My heart shines brightest with you. Happy Birthday, my love ‚ù§Ô∏è
    </div>

  </div>
</div>

<div id="timeline" class="section">
  <div class="center">
    <h1>üåô Our Story Under the Stars</h1>
    <div class="timeline" aria-label="Relationship timeline">
      <div class="event">
        <div class="event-title">‚ú® The Day We Met</div>
        <div class="event-text">A spark lit between two hearts far apart.</div>
      </div>

      <div class="event">
        <div class="event-title">üíå First Long-Distance Call</div>
        <div class="event-text">Time disappeared. It felt like home.</div>
      </div>

      <div class="event">
        <div class="event-title">‚ù§Ô∏è Our First ‚ÄúI Love You‚Äù</div>
        <div class="event-text">Two skies. One love.</div>
      </div>

      <div class="event">
        <div class="event-title">üåü Today: Your Birthday</div>
        <div class="event-text">You're the brightest star in my universe.</div>
      </div>
    </div>
  </div>
</div>

<script>
/* ---------- TAB SWITCHING (keyboard friendly) ---------- */
function openTab(e){
  const target = e.currentTarget?.dataset?.target || (e.target && e.target.dataset && e.target.dataset.target);
  if(!target) return;
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(target).classList.add('active');

  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active-tab'));
  // support keyboard events: use currentTarget if available
  const tabEl = e.currentTarget || e.target;
  tabEl.classList.add('active-tab');
  // ensure focus visible for keyboard users
  tabEl.focus();
}

/* ---------- SPARKLES (lightweight) ---------- */
function createSparkle(){
  const el = document.createElement('div');
  el.className = 'sparkle';
  el.style.left = Math.random()*innerWidth + 'px';
  el.style.top = Math.random()*innerHeight*0.6 + 'px';
  el.style.animationDuration = (1 + Math.random()*2) + 's';
  document.body.appendChild(el);
  setTimeout(()=>el.remove(), 2800);
}
const sparkleInterval = setInterval(createSparkle, 220);

/* ---------- RIBBON PULL DRAG BEHAVIOR (pointer events - works on touch) ---------- */
(function(){
  const pull = document.getElementById('pullRibbon');
  const lid = document.getElementById('lid');
  const box = document.getElementById('box');
  const vRibbon = document.getElementById('verticalRibbon');
  const giftMsg = document.getElementById('giftMsg');

  let dragging = false, startY = 0, lastY = 0, moved = 0;
  const TRIGGER_DELTA = 70; // px needed to open (adjustable)

  // apply pointerdown to start drag (works with touch + mouse)
  pull.addEventListener('pointerdown', (ev)=>{
    ev.preventDefault();
    dragging = true;
    startY = ev.clientY;
    lastY = startY;
    pull.setPointerCapture(ev.pointerId);
    pull.style.transition = 'none';
  });

  // move => visual feedback (translate the ribbon upward as you drag)
  pull.addEventListener('pointermove', (ev)=>{
    if(!dragging) return;
    lastY = ev.clientY;
    moved = startY - lastY; // positive when dragging up
    // clamp
    const clamp = Math.max(0, Math.min(moved, 160));
    pull.style.transform = `translate(-50%, ${-clamp}px) rotate(${clamp/10 * -1}deg)`;
  });

  // release => decide open or reset
  pull.addEventListener('pointerup', (ev)=>{
    if(!dragging) return;
    dragging = false;
    pull.releasePointerCapture(ev.pointerId);
    pull.style.transition = 'transform .35s ease, opacity .25s';
    if(moved > TRIGGER_DELTA){
      // open the box
      openBox();
    } else {
      // reset
      pull.style.transform = 'translateX(-50%)';
    }
    moved = 0;
  });

  // also allow keyboard "Enter/Space" to trigger open for accessibility
  pull.addEventListener('keydown', (ev)=>{
    if(ev.key === 'Enter' || ev.key === ' '){
      ev.preventDefault();
      openBox();
    }
  });

  function openBox(){
    // add opened classes for CSS transitions
    pull.classList.add('opened');
    lid.classList.add('opened');
    vRibbon.classList.add('opened');
    // shrink and hide box body
    box.classList.add('opened');

    // show message after a slight delay (so animation feels natural)
    setTimeout(()=>{
      giftMsg.style.display = 'block';
      giftMsg.classList.add('visible');
    }, 650);
  }

  // defensive: if user switches tab away then returns, ensure pointerrelease cleanup
  window.addEventListener('pointercancel', ()=>{ dragging=false; pull.style.transform='translateX(-50%)' })
})();

/* ---------- optional: stop sparkles on low memory devices (light) ---------- */
if(navigator.deviceMemory && navigator.deviceMemory < 1.5){
  // stop creating many sparkles on very low memory devices
  clearInterval(sparkleInterval);
}
</script>
</body>
</html>
